App As appinfo:
    BackEnabled: =true
    OnStart: |-
        =Set(
            isConnected,
            Connection.Connected
        );
        // Creating Collect for LoadFlights
        If(
            isConnected,
            Collect(
                UpdatedFlightData,
                FMS_Flights
            );
            
        );
        // Isconnected condition for checking
        If(
            isConnected,
        // IsConnected Condition 
        //loaddata from local storage     
        //          ************************************Connected COndition *****************
            LoadData(
                loadflights,
                "loadflights"
            );
            
        //for all used to update data to sharepoint from local storage when we are connected to network.
        ForAll(
                loadflights As input,
                Patch(
                    FMS_Flights,
                    {ID: input.ID},
                    {
                        From: input.From,
                        To: input.To,
                        Arrival_Date: input.Arrival_Date,
                        Arrival_Time: input.Arrival_Time,
                        Title: input.Title,
                        Departure_Date: input.Departure_Date,
                        Departure_Time: input.Departure_Time
                    }
                )
            );
            
        // refresh data source 
        Refresh(FMS_Flights);
            
        // updated data is stored in updatedata 
        //********************************************************
        Clear(UpdatedFlightData);
            Collect(
                UpdatedFlightData,
                FMS_Flights
            );
            
        //Clear load data and save updated data 
        //****************************    
        Clear(loadflights);
            Collect(
                loadflights,
                UpdatedFlightData
            );
            ,
         //
        //
        //*************************** Disconnected Condition ***********************   
            LoadData(
                loadflights,
                "loadflights"
            );
            
        //for all used to update data to UpdateData from local Data .
        /*ForAll(
                loadflights As input,
                Patch(
                    UpdatedFlightData,
                    {ID: input.ID},
                    {
                        From: input.From,
                        To: input.To,
                        Arrival_Date: input.Arrival_Date,
                        Arrival_Time: input.Arrival_Time,
                        Title: input.Title,
                        Departure_Date: input.Departure_Date,
                        Departure_Time: input.Departure_Time
                    }
                )
            );
            */
        // refresh data source 
        //Refresh(FMS_Flights);
        // updated data is stored in updatedata 
        //********************************************************
        Clear(UpdatedFlightData);
            Collect(
                UpdatedFlightData,
                loadflights
            );
            
        //Clear load data and save updated data 
        //****************************    
        Clear(loadflights);
            Collect(
                loadflights,
                UpdatedFlightData
            );
            
        );
        ClearCollect(
            Details,
            [
                {
                    CrewMember: "Chetan",
                    Number: "#01234",
                    from: "Delhi",
                    to: "Chennai",
                    Date: "20/12/2023",
                    DepartureTime: "4:00 PM",
                    ArrivalTime: "7:00 PM"
                },
                {
                    CrewMember: "Gourav",
                    Number: "#01234",
                    from: "Delhi",
                    to: "Chennai",
                    Date: "20/12/2023",
                    DepartureTime: "4:00 PM",
                    ArrivalTime: "7:00 PM"
                }
            ]
        );
        /*
        LoadData(
            crew,
            "crewdata"
        );
        If(
            isConnected,
            ForAll(
                crew,
                Patch(
                    FMS_Crew_Members,
                    Defaults(FMS_Crew_Members),
                    {Crew_Member_Name: ThisRecord.Crew_Member_Name}
                )
            );
            Collect(
                updatedCrew,
                ForAll(
                    FMS_Crew_Members,
                    ThisRecord
                )
            );
            Clear(crew);
            
        );*/
        Set(
            colors,
            ColorValue("#f1f6f8")
        );
        ClearCollect(galleryItems,UpdatedFlightData);
    StartScreen: =Home_Screen
    Theme: =PowerAppsTheme

    Host As hostControl.DefaultHostControlVariant:
        OnCancel: =false
        OnEdit: =false
        OnNew: =false
        OnSave: =false
        OnView: =false

